var $=Object.defineProperty;var ee=(r,e,c)=>e in r?$(r,e,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[e]=c;var P=(r,e,c)=>ee(r,typeof e!="symbol"?e+"":e,c);import{g as W,ac as te,C as se,ad as ie,W as oe,ae as ne,D as ae,P as E,e as re,E as w,af as q,ag as R,O as le,ah as ce,u as de,z as pe,H as me,ai as he,x as ue,w as fe}from"./three_core-DzVOSUdM.js";import{G as T}from"./three_extras-DJcOm3X-.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))m(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const y of d.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&m(y)}).observe(document,{childList:!0,subtree:!0});function c(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function m(l){if(l.ep)return;l.ep=!0;const d=c(l);fetch(l.href,d)}})();const ge="/relativity-spacetime/assets/scene-Dn8Xpbvn.gltf",ye="/relativity-spacetime/assets/scene-Z56Riy47.gltf";class we{constructor(){P(this,"clock");P(this,"clockRate");P(this,"model");P(this,"position");this.clock=0,this.clockRate=1,this.model=null,this.position=new W}setModel(e){this.model=e,this.position=this.model.position}setPosition(e,c,m){this.position.set(e,c,m),this.model&&this.model.position.set(e,c,m)}}const ve=66743e-15,v=299792458,M=1,I=6,L=9,Me=3870;document.querySelector("#app").innerHTML=`
  <div class="three-container" id="three-container"></div>
  <div class="ui-container">
    <div class="slider-container">
      <label>Planet Mass (x10²⁴ kg):</label>
      <input type="range" id="massSlider" min="1" max="10" value="5.972" step="0.1">
      <span id="massValue">5.972</span>
    </div>
  </div>
`;const Le=()=>{const r=document.getElementById("three-container");if(!r)return;const e=new te;e.background=new se(1909303);const c=new ie({antialias:!0,alpha:!0});c.setClearColor(1909303,1),c.setSize(r.clientWidth,r.clientHeight),r.appendChild(c.domElement);const m=new oe(75,r.clientWidth/r.clientHeight,.1,1e3);m.position.set(-5,5,-5),m.lookAt(0,0,0);const l=new ne(16777215,1);e.add(l);const d=new ae(16777215,1.5);d.position.set(-5,5,3),e.add(d);const y=new E(16777215,1.5,100);y.position.set(2,3,4),e.add(y);const z=new E(16777215,1,100);z.position.set(-3,2,5),e.add(z);const B=new E(16777215,1,100);B.position.set(4,-2,3),e.add(B);const u=new re(16777215,2);u.position.set(10,10,10),u.angle=Math.PI/6,u.penumbra=.2,u.decay=1,u.distance=50,u.target.position.set(0,0,0),e.add(u),e.add(u.target);let h=null;new T().load(ge,t=>{h=t.scene,h.scale.set(M,M,M),h.position.set(0,0,0),e.add(h),h.traverse(s=>{s instanceof w&&s.material&&(s.material.needsUpdate=!0,Array.isArray(s.material)?s.material.forEach(o=>{o.transparent=!1,o.opacity=1,o.shininess!==void 0&&(o.shininess=30)}):(s.material.transparent=!1,s.material.opacity=1,s.material.shininess!==void 0&&(s.material.shininess=30)))})},t=>{console.log(t.loaded/t.total*100+"% loaded")},t=>{console.error("An error happened loading the Earth model:",t);const s=new q(M,32,32),o=new R({color:"rgb(92, 190, 239)",transparent:!0,opacity:.99,shininess:30});h=new w(s,o),e.add(h)});const g=[],N=(t,s)=>{new T().load(ye,p=>{const i=p.scene;i.scale.set(5e-4,5e-4,5e-4),i.rotation.x=Math.PI/4,i.position.copy(s),e.add(i),t.setModel(i);const n=new E(16711680,2,3);n.position.set(0,0,0),i.add(n),i.traverse(a=>{a instanceof w&&a.material&&(a.material.needsUpdate=!0,Array.isArray(a.material)?a.material.forEach(f=>{f.transparent=!1,f.opacity=1,f.shininess!==void 0&&(f.shininess=80)}):(a.material.transparent=!1,a.material.opacity=1,a.material.shininess!==void 0&&(a.material.shininess=80)))})},void 0,p=>{console.error("An error happened loading the satellite model:",p);const i=new q(.3,16,16),n=new R({color:16711680,shininess:80,emissive:16711680,emissiveIntensity:.5}),a=new w(i,n);a.position.copy(s),e.add(a),t.setModel(a)})};for(let t=0;t<L;t++){const s=t/L*Math.PI*2,o=I*Math.cos(s),p=I*Math.sin(s),i=new we;i.setPosition(o,0,p),g.push(i),N(i,new W(o,0,p))}const x=new le;e.add(x);const A=.2,U=new ce(A,A,A),j=new R({color:65280,shininess:60,emissive:65280,emissiveIntensity:.1}),S=new w(U,j),K=M+.1;S.position.set(K,0,0),x.add(S);const X=new de({color:65535,linewidth:3}),C=[];for(let t=0;t<L;t++){const s=new pe().setFromPoints([g[t].position,S.position]),o=new me(s,X);e.add(o),C.push(o)}const b=10,D=.2,F=new he(b,b,b/D,b/D),Z=new ue({color:"rgb(0, 161, 140)",wireframe:!0,side:fe}),O=new w(F,Z);O.rotation.x=-Math.PI/2,O.position.y=-1,e.add(O);function H(t){const s=t*ve/(v*v)*500,o=F.attributes.position.array,p=.5;for(let i=0;i<o.length;i+=3){const n=o[i],a=o[i+1],f=Math.sqrt(n*n+a*a);o[i+2]=-s/(f+p)}F.attributes.position.needsUpdate=!0}function _(t,s){const o=t.position.length(),p=-66743e-15*s/o,i=-66743e-15*s/M,n=Me/1e6;return((p-i)/(v*v)-n*n/(2*v*v))*1e6}const G=document.getElementById("massSlider"),J=document.getElementById("massValue");H(parseFloat(G.value)*1e24),G.addEventListener("input",()=>{const t=parseFloat(G.value);J.textContent=t.toFixed(3),H(t*1e24)});let k=0;const V=()=>{requestAnimationFrame(V);const t=.001;h&&(h.rotation.y+=t),x.rotation.y+=t;const o=.016*10/1e3;k+=o;const p=parseFloat(G.value)*1e24;for(let n=0;n<L;n++){const a=n/L*Math.PI*2+k*.5,f=I*Math.cos(a),Q=I*Math.sin(a);g[n].setPosition(f,0,Q);const Y=(1+_(g[n],p))*o;g[n].clock+=g[n].clockRate*Y}const i=new W;S.getWorldPosition(i);for(let n=0;n<L;n++)C[n].geometry.setFromPoints([g[n].position,i]);c.render(e,m)};V(),window.addEventListener("resize",()=>{m.aspect=r.clientWidth/r.clientHeight,m.updateProjectionMatrix(),c.setSize(r.clientWidth,r.clientHeight)})};Le();
